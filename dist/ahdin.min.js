!function(){"use strict";angular.module("ahdin",[])}(),function(){"use strict";function t(t,e,n,r,o,a){function i(t){function e(e){return m(e,t)}function n(e){return c(e,t)}return d(t),w=t.quality||a,u(t).then(e).then(n).then(f)}function u(e){function o(t){a.resolve(t),n.$apply()}var a=t.defer();return r.parseMetaData(e.sourceFile,o,e),a.promise}function m(e,o){function a(t){i.resolve(t),n.$apply()}var i=t.defer(),u=s(e,o);return r(o.sourceFile,a,u),i.promise}function s(t,e){var n={maxWidth:e.maxWidth,maxHeight:e.maxHeight};return t.exif&&(n.orientation=t.exif.get("Orientation")),n}function c(n,r){var o=t.defer(),a=r&&r.outputFormat||"jpeg",i="image/"+a,u=e.document.createElement("canvas");u.width=n.width,u.height=n.height,u.getContext("2d").drawImage(n,0,0,u.width,u.height);var m={dataUrl:u.toDataURL(i,w),fileName:r.sourceFile.name};return o.resolve(m),o.promise}function f(r){function a(t){t.name=r.fileName}var i=t.defer(),u=o.dataURLToBlob(r.dataUrl);return u.then(a),i.resolve(u),e.setTimeout(function(){n.$apply()}),i.promise}function l(t){return angular.isNumber(t)&&t>0}function d(t){t=t||{},h(t.sourceFile),p(t.maxWidth),v(t.maxHeight),g(t.outputFormat),b(t.quality)}function h(t){var n=t instanceof e.File||t instanceof e.Blob;if(!n)throw new Error("params.sourceFile must be instance of File")}function p(t){var e=void 0===t||l(t);if(!e)throw new Error("params.maxWidth must be a positive Number")}function v(t){var e=void 0===t||l(t);if(!e)throw new Error("params.maxHeight must be a positive Number")}function g(t){var e=x.indexOf(t)>-1,n=t?e:!0;if(!n)throw new Error("params.outputFormat format must be one of ["+x+"]")}function b(t){var e=void 0===t||t>0&&1>=t;if(!e)throw new Error("params.quality must be a Number over 0 and less or equal to 1")}var w,x=["jpeg","png"];return{compress:i}}angular.module("ahdin").factory("Ahdin",t),t.$inject=["$q","$window","$rootScope","loadImage","blobUtil","QUALITY"]}(),function(){"use strict";angular.module("ahdin").constant("blobUtil",blobUtil).constant("loadImage",loadImage).constant("QUALITY",.8)}();