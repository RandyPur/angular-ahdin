!function(){"use strict";angular.module("ahdin",[])}(),function(){"use strict";function t(t,e,n,r,o,a){function i(t){function e(e){return s(e,t)}function n(e){return m(e,t)}return d(t),w=t.quality||a,u(t).then(e).then(n).then(c)}function u(e){function o(t){a.resolve(t),n.$apply()}var a=t.defer();return r.parseMetaData(e.sourceFile,o,e),a.promise}function s(e,o){function a(t){i.resolve(t),n.$apply()}var i=t.defer(),u=f(e,o);return r(o.sourceFile,a,u),i.promise}function f(t,e){var n={canvas:!0,maxWidth:e.maxWidth,maxHeight:e.maxHeight};return t.exif&&(n.orientation=t.exif.get("Orientation")),n}function m(e,n){var r=t.defer(),o=n&&n.outputFormat||"jpeg",a="image/"+o,i={dataUrl:e.toDataURL(a,w),fileName:n.sourceFile.name};return r.resolve(i),r.promise}function c(r){function a(t){t.name=r.fileName}var i=t.defer(),u=o.dataURLToBlob(r.dataUrl);return u.then(a),i.resolve(u),e.setTimeout(function(){n.$apply()}),i.promise}function l(t){return angular.isNumber(t)&&t>0}function d(t){t=t||{},p(t.sourceFile),v(t.maxWidth),h(t.maxHeight),b(t.outputFormat),g(t.quality)}function p(t){var n=t instanceof e.File||t instanceof e.Blob;if(!n)throw new Error("params.sourceFile must be instance of File")}function v(t){var e=void 0===t||l(t);if(!e)throw new Error("params.maxWidth must be a positive Number")}function h(t){var e=void 0===t||l(t);if(!e)throw new Error("params.maxHeight must be a positive Number")}function b(t){var e=x.indexOf(t)>-1,n=t?e:!0;if(!n)throw new Error("params.outputFormat format must be one of ["+x+"]")}function g(t){var e=void 0===t||t>0&&1>=t;if(!e)throw new Error("params.quality must be a Number over 0 and less or equal to 1")}var w,x=["jpeg","png"];return{compress:i}}angular.module("ahdin").factory("Ahdin",t),t.$inject=["$q","$window","$rootScope","loadImage","blobUtil","QUALITY"]}(),function(){"use strict";angular.module("ahdin").constant("blobUtil",blobUtil).constant("loadImage",loadImage).constant("QUALITY",.8)}();